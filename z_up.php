<?php
// Tu imagen codificada en base64
$imagenBase64 = "data:image/webp;base64,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"; // Asegúrate de tener la imagen completa aquí

// Decodifica la imagen base64 y guárdala en un archivo temporal
$imagenTempPath = tempnam(sys_get_temp_dir(), 'imagen_');
$imagenData = base64_decode(preg_replace('#^data:image/\w+;base64,#i', '', $imagenBase64));
file_put_contents($imagenTempPath, $imagenData);

// Configura la solicitud cURL
$curl3 = curl_init();
curl_setopt_array($curl3, array(
    CURLOPT_URL => 'https://codidrive.com/codi/api/driver/updatephoto',
    CURLOPT_RETURNTRANSFER => true,
    CURLOPT_ENCODING => '',
    CURLOPT_MAXREDIRS => 10,
    CURLOPT_TIMEOUT => 0,
    CURLOPT_FOLLOWLOCATION => true,
    CURLOPT_HTTP_VERSION => CURL_HTTP_VERSION_1_1,
    CURLOPT_CUSTOMREQUEST => 'POST',
    CURLOPT_POSTFIELDS => array(
        'foto' => new CURLFILE($imagenTempPath),
        'id_persona' => '120'
    ),
));

// Realiza la solicitud cURL
$response = curl_exec($curl3);
echo $response;
// Cierra la solicitud cURL
curl_close($curl3);

// Elimina el archivo temporal
unlink($imagenTempPath);

// Maneja la respuesta de la solicitud cURL aquí
?>
